PRD: 토정비결 & 사주팔자 SaaS (MVP)

0. 문서 정보
- 문서 버전: v1.1 (MVP + 궁합)
- 기준 타임존: Asia/Seoul
- 대상 플랫폼: Web (모바일 우선, 데스크톱 대응)
- BM: 구독 + 1회 결제(리포트 구매)

1. 제품 개요
1.1 문제 정의
- 운세 서비스는 많지만, 사용자는 다음에서 불만이 큼:
  1) 출생정보/절기/시간 경계 등 계산 신뢰 불명확
  2) 말이 앞뒤 안 맞거나 과장된 해석 품질
  3) “왜 이런 결론인지” 근거 부족
  4) 결제 후 내용이 빈약하거나 재방문 가치가 낮음

1.2 해결 방향(제품 원칙)
- P0: 계산은 100% 재현 가능(룰 기반)
- P1: 근거를 보이는 해석(Explainable)
- P2: 사용자 목적에 맞춰 요약 제공(연애/직장/금전/건강 등)
- P3: 불안/공포 조장 금지 + 안전 문구 정책

2. 목표/성공지표
2.1 MVP 목표
- 사용자가 3분 내에 입력 → 결과 확인 → “근거 포함 리포트”로 신뢰를 느끼고 결제로 이어지게.

2.2 성공 지표 (예시)
- Activation: 가입/비가입 포함 “결과 페이지 도달률” 60%+
- Conversion: 결과 조회 → 결제 전환율 3~7%(초기 목표)
- Retention: 월 구독자 2주 내 재방문율 25%+
- Quality: 결과 페이지 ‘도움됨’ 피드백 70%+, “불쾌/불안 유발” 신고율 1% 미만

3. 범위 정의
3.1 MVP 포함 (In Scope)
- 사주팔자: 사주(연/월/일/시) 산출 + 기본 해석 리포트
- 토정비결: 연간/월간 운세 리포트(항목별)
- AI 기반 사주 궁합 추천
- 입력/계산 신뢰 강화 UX: 시간 모름, 음력, 윤달, 절기 경계 안내
- 근거 보기: 해석에 사용된 요소(십신/합충 등) 간단 근거 표시
- 결제: 1회 구매(리포트) + 월 구독
- 마이페이지: 리포트 저장/재조회
- 피드백 수집(품질 개선 루프)

3.2 MVP 제외 (Out of Scope)
- 전화/채팅 상담 연결, 전문가 매칭
- 커뮤니티/게시판
- 다국어/해외 결제(추후)
- 고급 심화(격국/용신 심층, 택일/작명) — v2+

4. 사용자/페르소나
4.1 핵심 페르소나
1) 가볍게 보는 사용자: 무료로 맛보고 “신뢰되면 결제”
2) 고관여 사용자: 사주표/근거/기준을 중요시, 재방문 가능성 높음
3) 선물/공유 사용자: 리포트를 공유/저장하고 싶음 (링크 공유, PDF 저장 기능 제공)

5. 주요 사용자 시나리오(User Journey)
5.1 비회원 빠른 체험 플로우(최우선)
1) 랜딩 → “3분 만에 내 사주” CTA
2) 입력(생년월일/시간/성별/출생지/양력·음력)
3) 결과(요약 + 근거/상세 일부 미리보기)
4) 결제 유도(전체 리포트 잠금 해제)
5) 결제 후 전체 보기 + 저장(계정 생성 유도)

5.2 회원 리텐션 플로우
- 마이페이지 → 저장된 리포트 재조회
- “이번 달 운세/이번 주 포인트” 알림(푸시/메일은 v2)
- 피드백(맞음/도움/근거가 좋음/불안함 등)

6. 기능 요구사항 (MVP)

6.1 입력/온보딩
필수 입력
- 이름(표시용, 저장 선택)
- 생년월일: 양력/음력 토글
- 출생시간:
  - 정확한 시간 선택(시/분)
  - “시간 모름” 선택 시: 시주 제외 or 추정 옵션(룰 기반 제공)
- 성별(해석 표현 일부 조정용)
- 출생지(기본: 대한민국/도시 수준. MVP는 ‘표준 한국 시간’ 고정 가능하나, UI에는 명시)

검증/예외처리
- 윤달 입력 지원(음력 선택 시 윤달 체크)
- 자정/자시 경계(23:00~01:00) 룰이 있으면 사용자에게 안내(“우리 서비스 기준” 명시)

UX 요구
- 입력 중 이탈 방지: 단계형(2~3 step), 진행률 표시
- 개인정보 안내: “입력 정보는 리포트 생성에만 사용, 언제든 삭제 가능”

6.2 계산 엔진(룰 기반) — 핵심
출력(구조화 JSON)
- 사주 팔자: 연주/월주/일주/시주 (천간/지지)
- 오행 분포(목화토금수)
- 십신 관계(일간 기준)
- 주요 합/충/형/해(최소 세트)
- 토정비결 키: 연/월/카테고리별 결과 key (문구/템플릿 조회용)

품질 요구
- 같은 입력 → 항상 같은 결과(결정론)
- 테스트 케이스 기반 자동검증(절기 경계, 윤달, 자시 경계)

6.3 결과 화면(리포트 UX)
구성
1) 상단 요약 카드(한 문장 + 3개 키포인트)
2) 사주 표(연/월/일/시)
3) 항목별 해석(연애/직장/금전/건강/대인관계)
4) 토정비결 연간 → 월간(이번 달 강조)
5) 근거 보기 토글
   - “이 해석에 사용된 요소: (예) 일간, 십신, 합충, 오행 균형”
   - MVP는 간단 설명만(전문 용어 사전은 v2)

잠금/결제(프리미엄)
- 무료: 요약 + 일부 항목 미리보기(예: 각 항목 1~2문단)
- 유료: 전체 항목 + 월간 상세 + 근거 확장 + 저장

6.4 결제/구독
상품
- 1회 구매: “올해 리포트 잠금 해제”
- 월 구독: 매월 업데이트(월간 운세 + 월 리포트 히스토리)

요구사항
- 결제 성공/실패/환불 상태 기록
- 구독 해지 즉시 반영(다음 결제일 안내)
- 영수증/결제 내역 마이페이지 노출

6.5 계정/마이페이지
- 소셜 로그인(선택) + 이메일 로그인(선택)
- 내 리포트 목록(생성일, 타입: 사주/토정/월간)
- 리포트 다시 보기
- 개인정보 삭제(계정 삭제 및 리포트 데이터 삭제)
- 피드백 제출

6.6 관리자(Admin) — 최소
- 템플릿/문구 관리(버전)
- 결과 키 매핑 확인(토정비결 key → 텍스트)
- 사용자 피드백 대시보드(불만/불안 유발 플래그)
- 결제/구독 상태 조회(지원용)

7. 콘텐츠/문구 정책
- 과장 금지: “무조건”, “반드시”, “확정” 같은 단정 최소화
- 공포/불안 조장 금지: 질병/사망/법적 결과 단정 금지
- 차별/혐오 표현 금지
- 의료/법률/투자 조언 면책 문구 표준 삽입(하단 고정)

8. 데이터 모델(초안)
8.1 주요 테이블
- users: id, auth_provider, email, created_at, deleted_at
- profiles: user_id, name, birth_date, is_lunar, is_leap_month, birth_time, time_unknown, gender, birth_place, timezone
- reports: id, user_id, type(saju/tojeong/monthly), input_snapshot, engine_version, content_version, result_json, created_at
- payments: id, user_id, provider, product_type, status, amount, currency, created_at
- subscriptions: id, user_id, status, plan, started_at, current_period_end
- feedback: id, user_id, report_id, rating, tags, comment, created_at

8.2 버전 필드(중요)
- engine_version: 계산 로직 버전(정확도/재현성)
- content_version: 해석 템플릿 버전(문구 품질 관리)

9. API 요구(예시)
- POST /api/v1/report/preview : 입력 → 무료 미리보기 생성
- POST /api/v1/payment/checkout : 결제 세션 생성
- POST /api/v1/report/unlock : 결제 확인 후 전체 리포트 생성/오픈
- GET  /api/v1/reports : 내 리포트 목록
- GET  /api/v1/reports/:id : 리포트 상세
- POST /api/v1/feedback : 피드백 제출

10. 비기능 요구사항(NFR)
- 성능: 결과 생성(룰 계산 + 문장 조립) 3초 이내 목표(캐시 허용)
- 가용성: 장애 시 “미리보기/결제” 분리(결제는 최우선 안정)
- 보안:
  - 전송/저장 암호화
  - 로그에 생년월일/시간 원문 노출 금지(마스킹)
  - 접근 제어(리포트는 소유자만)
- 개인정보:
  - 데이터 삭제 요청 즉시 처리(법적 요구 범위 내)
  - 최소 수집(불필요 항목 금지)

11. QA/테스트 계획
11.1 계산 엔진 테스트(필수)
- 절기 경계일 전후 케이스
- 윤달 케이스
- 자시(23:00~01:00) 경계 케이스
- 시간 모름 케이스(시주 미포함 시의 문장 품질)

11.2 콘텐츠 테스트
- 모순/반복/금지 문구 탐지
- 항목별 톤 일관성
- “근거 보기”와 본문 논리 일치

12. 출시 계획(MVP)
- Phase 0: 내부 알파(테스트 케이스 + 전문가 감수)
- Phase 1: 클로즈드 베타(피드백/리포트 개선)
- Phase 2: 퍼블릭 런칭(결제 오픈, 고객지원 문구/정책 확정)

13. 리스크 & 대응
1) 유파/기준 논쟁 → “서비스 기준”을 명시하고 버전 관리(엔진/콘텐츠)
2) 정확도 불신 → 근거 보기 + 계산 방식 안내 + 테스트 신뢰 확보
3) 불안 유발/민원 → 금지 정책 + 신고/피드백 플래그 + 빠른 문구 롤백
4) 결제 이탈 → 미리보기 품질 강화 + 구매 후 가치(저장/월간 업데이트)

MVP에서 “정확도 체감”을 만드는 3가지 결정(바로 정해야 함)
1) 절기 기준 월주 전환을 채택하는지
2) 자시 날짜 경계 룰(23~01시 처리 기준)
3) 시간 모름 사용자에게 “시주 제외 리포트”를 어떻게 안내/보완할지
